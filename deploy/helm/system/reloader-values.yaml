# ========================================================================
# RELOADER - HELM VALUES
# ========================================================================
# Reloader watches ConfigMaps and Secrets and triggers rolling updates
# when they change. This enables automatic pod restarts when Terraform
# updates the infra-config ConfigMap.
#
# Install: helm repo add stakater https://stakater.github.io/stakater-charts
#          helm install reloader stakater/reloader -n kube-system -f reloader-values.yaml
# ========================================================================

reloader:
  watchGlobally: true

  # Only watch specific namespaces (optional - set to limit scope)
  # namespaceSelector: "contentpulse"

  # Resource limits
  resources:
    requests:
      cpu: 10m
      memory: 32Mi
    limits:
      cpu: 100m
      memory: 128Mi

  # Log level
  logFormat: json

  # Reload strategy: env-vars reloads just env vars, rolling does full restart
  reloadStrategy: default

# Pod security
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 65534

# Service account
serviceAccount:
  create: true
  name: reloader
